---
data:
  _extendedDependsOn:
  - icon: ':heavy_check_mark:'
    path: algorithm/binary_heap.go
    title: algorithm/binary_heap.go
  - icon: ':heavy_check_mark:'
    path: algorithm/binary_heap117.go
    title: algorithm/binary_heap117.go
  - icon: ':heavy_check_mark:'
    path: algorithm/deque.go
    title: algorithm/deque.go
  - icon: ':heavy_check_mark:'
    path: algorithm/deque117.go
    title: algorithm/deque117.go
  - icon: ':heavy_check_mark:'
    path: algorithm/dijkstra.go
    title: algorithm/dijkstra.go
  - icon: ':heavy_check_mark:'
    path: algorithm/queue.go
    title: algorithm/queue.go
  - icon: ':heavy_check_mark:'
    path: algorithm/queue117.go
    title: algorithm/queue117.go
  - icon: ':heavy_check_mark:'
    path: algorithm/stack.go
    title: algorithm/stack.go
  - icon: ':heavy_check_mark:'
    path: algorithm/stack117.go
    title: algorithm/stack117.go
  - icon: ':heavy_check_mark:'
    path: algorithm/union_find.go
    title: algorithm/union_find.go
  - icon: ':heavy_check_mark:'
    path: main.go
    title: main.go
  - icon: ':heavy_check_mark:'
    path: main117.go
    title: main117.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_3_A-stack.test.go
    title: test/aoj-ALDS1_3_A-stack.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_3_A-stack117.test.go
    title: test/aoj-ALDS1_3_A-stack117.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_3_B-queue.test.go
    title: test/aoj-ALDS1_3_B-queue.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_3_B-queue117.test.go
    title: test/aoj-ALDS1_3_B-queue117.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_3_C-deque.test.go
    title: test/aoj-ALDS1_3_C-deque.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_3_C-deque117.test.go
    title: test/aoj-ALDS1_3_C-deque117.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_9_C-binary_haep.test.go
    title: test/aoj-ALDS1_9_C-binary_haep.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_9_C-binary_haep117.test.go
    title: test/aoj-ALDS1_9_C-binary_haep117.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-DSL_1_A-union_find.test.go
    title: test/aoj-DSL_1_A-union_find.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-GRL_1_A-dijkstra.test.go
    title: test/aoj-GRL_1_A-dijkstra.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-GRL_1_B-bellman_ford.test.go
    title: test/aoj-GRL_1_B-bellman_ford.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ITP1_1_A.test.go
    title: test/aoj-ITP1_1_A.test.go
  _extendedRequiredBy:
  - icon: ':heavy_check_mark:'
    path: algorithm/binary_heap.go
    title: algorithm/binary_heap.go
  - icon: ':heavy_check_mark:'
    path: algorithm/binary_heap117.go
    title: algorithm/binary_heap117.go
  - icon: ':heavy_check_mark:'
    path: algorithm/deque.go
    title: algorithm/deque.go
  - icon: ':heavy_check_mark:'
    path: algorithm/deque117.go
    title: algorithm/deque117.go
  - icon: ':heavy_check_mark:'
    path: algorithm/dijkstra.go
    title: algorithm/dijkstra.go
  - icon: ':heavy_check_mark:'
    path: algorithm/queue.go
    title: algorithm/queue.go
  - icon: ':heavy_check_mark:'
    path: algorithm/queue117.go
    title: algorithm/queue117.go
  - icon: ':heavy_check_mark:'
    path: algorithm/stack.go
    title: algorithm/stack.go
  - icon: ':heavy_check_mark:'
    path: algorithm/stack117.go
    title: algorithm/stack117.go
  - icon: ':heavy_check_mark:'
    path: algorithm/union_find.go
    title: algorithm/union_find.go
  - icon: ':heavy_check_mark:'
    path: main.go
    title: main.go
  - icon: ':heavy_check_mark:'
    path: main117.go
    title: main117.go
  _extendedVerifiedWith:
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_3_A-stack.test.go
    title: test/aoj-ALDS1_3_A-stack.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_3_A-stack117.test.go
    title: test/aoj-ALDS1_3_A-stack117.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_3_B-queue.test.go
    title: test/aoj-ALDS1_3_B-queue.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_3_B-queue117.test.go
    title: test/aoj-ALDS1_3_B-queue117.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_3_C-deque.test.go
    title: test/aoj-ALDS1_3_C-deque.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_3_C-deque117.test.go
    title: test/aoj-ALDS1_3_C-deque117.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_9_C-binary_haep.test.go
    title: test/aoj-ALDS1_9_C-binary_haep.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ALDS1_9_C-binary_haep117.test.go
    title: test/aoj-ALDS1_9_C-binary_haep117.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-DSL_1_A-union_find.test.go
    title: test/aoj-DSL_1_A-union_find.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-GRL_1_A-dijkstra.test.go
    title: test/aoj-GRL_1_A-dijkstra.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-GRL_1_B-bellman_ford.test.go
    title: test/aoj-GRL_1_B-bellman_ford.test.go
  - icon: ':heavy_check_mark:'
    path: test/aoj-ITP1_1_A.test.go
    title: test/aoj-ITP1_1_A.test.go
  _isVerificationFailed: false
  _pathExtension: go
  _verificationStatusIcon: ':heavy_check_mark:'
  attributes: {}
  bundledCode: "Traceback (most recent call last):\n  File \"/home/runner/.local/lib/python3.10/site-packages/onlinejudge_verify/documentation/build.py\"\
    , line 71, in _render_source_code_stat\n    bundled_code = language.bundle(stat.path,\
    \ basedir=basedir, options={'include_paths': [basedir]}).decode()\n  File \"/home/runner/.local/lib/python3.10/site-packages/onlinejudge_verify/languages/user_defined.py\"\
    , line 68, in bundle\n    raise RuntimeError('bundler is not specified: {}'.format(str(path)))\n\
    RuntimeError: bundler is not specified: algorithm/bellman_ford.go\n"
  code: "//go:build go1.18\n\npackage algorithm\n\nimport (\n\t\"errors\"\n\t\"math\"\
    \n\n\t\"golang.org/x/exp/constraints\"\n)\n\nvar ErrBellmanFordOutOfRange = errors.New(\"\
    BellmanFord: index out of range\")\n\ntype BellmanFord[T constraints.Integer |\
    \ constraints.Float] struct {\n\tvn  int\n\tg   []*bellmanFordEdge[T]\n\td   []T\n\
    \tpre []int\n\tinf T\n}\n\ntype bellmanFordEdge[T constraints.Integer | constraints.Float]\
    \ struct {\n\tfrom int\n\tto   int\n\tcost T\n}\n\nfunc NewBellmanFord[T constraints.Integer\
    \ | constraints.Float](n int, inf T) *BellmanFord[T] {\n\td := make([]T, n)\n\t\
    pre := make([]int, n)\n\tfor i := 0; i < n; i++ {\n\t\td[i] = inf\n\t\tpre[i]\
    \ = -1\n\t}\n\treturn &BellmanFord[T]{\n\t\tvn:  n,\n\t\tg:   []*bellmanFordEdge[T]{},\n\
    \t\td:   d,\n\t\tpre: pre,\n\t\tinf: inf,\n\t}\n}\n\nfunc NewDefaultBellmanFord(n\
    \ int) *BellmanFord[int] {\n\treturn NewBellmanFord(n, math.MaxInt)\n}\n\nfunc\
    \ (b *BellmanFord[T]) Infinity() T {\n\treturn b.inf\n}\n\nfunc (b *BellmanFord[T])\
    \ Order() int {\n\treturn b.vn\n}\n\nfunc (b *BellmanFord[T]) AddEdge(from, to\
    \ int, cost T) {\n\tif !(0 <= from && from < b.Order() && 0 <= to && to < b.Order())\
    \ {\n\t\tpanic(ErrBellmanFordOutOfRange)\n\t}\n\tb.g = append(b.g, &bellmanFordEdge[T]{\n\
    \t\tfrom: from,\n\t\tto:   to,\n\t\tcost: cost,\n\t})\n}\n\nfunc (b *BellmanFord[T])\
    \ FindNegativeCycle() bool {\n\tnd := make([]T, b.Order())\n\tfor i := 0; i <\
    \ b.Order(); i++ {\n\t\tupdate := false\n\t\tfor _, edge := range b.g {\n\t\t\t\
    if nd[edge.to] > nd[edge.from]+edge.cost {\n\t\t\t\tnd[edge.to] = nd[edge.from]\
    \ + edge.cost\n\t\t\t\tupdate = true\n\t\t\t}\n\t\t}\n\t\tif !update {\n\t\t\t\
    return false // non negative cycle\n\t\t}\n\t}\n\treturn true // find negative\
    \ cycle\n}\n\nfunc (b *BellmanFord[T]) BellmanFord(s int) bool {\n\tif !(0 <=\
    \ s && s < b.Order()) {\n\t\tpanic(ErrBellmanFordOutOfRange)\n\t}\n\tfor i :=\
    \ 0; i < b.Order(); i++ {\n\t\tb.d[i] = b.Infinity()\n\t\tb.pre[i] = -1\n\t}\n\
    \tb.d[s] = 0\n\tfor i := 0; i < b.Order(); i++ {\n\t\tupdate := false\n\t\tfor\
    \ _, edge := range b.g {\n\t\t\tif b.d[edge.from] == b.Infinity() {\n\t\t\t\t\
    continue\n\t\t\t}\n\t\t\tif b.d[edge.to] > b.d[edge.from]+edge.cost {\n\t\t\t\t\
    b.d[edge.to] = b.d[edge.from] + edge.cost\n\t\t\t\tb.pre[edge.to] = edge.from\n\
    \t\t\t\tupdate = true\n\t\t\t}\n\t\t}\n\t\tif !update {\n\t\t\treturn false //\
    \ non negative cycle\n\t\t}\n\t}\n\tfor i := 0; i < b.Order(); i++ {\n\t\tupdate\
    \ := false\n\t\tfor _, edge := range b.g {\n\t\t\tif b.d[edge.from] == b.Infinity()\
    \ || b.d[edge.to] == -b.Infinity() {\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tif b.d[edge.from]\
    \ == -b.Infinity() || b.d[edge.to] > b.d[edge.from]+edge.cost {\n\t\t\t\tb.d[edge.to]\
    \ = -b.Infinity()\n\t\t\t\tupdate = true\n\t\t\t}\n\t\t}\n\t\tif !update {\n\t\
    \t\tbreak\n\t\t}\n\t}\n\treturn true // find negative cycle\n}\n\nfunc (b *BellmanFord[T])\
    \ Distance(t int) T {\n\tif !(0 <= t && t < b.Order()) {\n\t\tpanic(ErrBellmanFordOutOfRange)\n\
    \t}\n\treturn b.d[t]\n}\n\nfunc (b *BellmanFord[T]) ShortestPath(t int) []int\
    \ {\n\tif !(0 <= t && t < b.Order()) {\n\t\tpanic(ErrBellmanFordOutOfRange)\n\t\
    }\n\tvar path []int\n\tif b.Distance(t) == b.Infinity() || b.Distance(t) == -b.Infinity()\
    \ {\n\t\treturn path\n\t}\n\tfor t != -1 {\n\t\tpath = append(path, t)\n\t\tt\
    \ = b.pre[t]\n\t}\n\tfor i := 0; i < len(path)/2; i++ {\n\t\tpath[i], path[len(path)-1-i]\
    \ = path[len(path)-1-i], path[i]\n\t}\n\treturn path\n}\n"
  dependsOn:
  - main.go
  - test/aoj-GRL_1_A-dijkstra.test.go
  - test/aoj-ALDS1_9_C-binary_haep117.test.go
  - test/aoj-ALDS1_3_C-deque.test.go
  - test/aoj-ALDS1_3_B-queue.test.go
  - test/aoj-ALDS1_9_C-binary_haep.test.go
  - test/aoj-ALDS1_3_B-queue117.test.go
  - test/aoj-ALDS1_3_C-deque117.test.go
  - test/aoj-GRL_1_B-bellman_ford.test.go
  - test/aoj-ITP1_1_A.test.go
  - test/aoj-DSL_1_A-union_find.test.go
  - test/aoj-ALDS1_3_A-stack.test.go
  - test/aoj-ALDS1_3_A-stack117.test.go
  - algorithm/stack117.go
  - algorithm/binary_heap117.go
  - algorithm/deque117.go
  - algorithm/queue117.go
  - algorithm/deque.go
  - algorithm/union_find.go
  - algorithm/dijkstra.go
  - algorithm/queue.go
  - algorithm/binary_heap.go
  - algorithm/stack.go
  - main117.go
  isVerificationFile: false
  path: algorithm/bellman_ford.go
  requiredBy:
  - main.go
  - algorithm/stack117.go
  - algorithm/binary_heap117.go
  - algorithm/deque117.go
  - algorithm/queue117.go
  - algorithm/deque.go
  - algorithm/union_find.go
  - algorithm/dijkstra.go
  - algorithm/queue.go
  - algorithm/binary_heap.go
  - algorithm/stack.go
  - main117.go
  timestamp: '2024-08-27 21:19:54+09:00'
  verificationStatus: LIBRARY_ALL_AC
  verifiedWith:
  - test/aoj-GRL_1_A-dijkstra.test.go
  - test/aoj-ALDS1_9_C-binary_haep117.test.go
  - test/aoj-ALDS1_3_C-deque.test.go
  - test/aoj-ALDS1_3_B-queue.test.go
  - test/aoj-ALDS1_9_C-binary_haep.test.go
  - test/aoj-ALDS1_3_B-queue117.test.go
  - test/aoj-ALDS1_3_C-deque117.test.go
  - test/aoj-GRL_1_B-bellman_ford.test.go
  - test/aoj-ITP1_1_A.test.go
  - test/aoj-DSL_1_A-union_find.test.go
  - test/aoj-ALDS1_3_A-stack.test.go
  - test/aoj-ALDS1_3_A-stack117.test.go
documentation_of: algorithm/bellman_ford.go
layout: document
redirect_from:
- /library/algorithm/bellman_ford.go
- /library/algorithm/bellman_ford.go.html
title: algorithm/bellman_ford.go
---
